{"version":3,"sources":["webpack:///webpack/bootstrap accbcbbd9ebccbafe00e","webpack:///./lib/util.js","webpack:///./lib/player.js","webpack:///./lib/platform_manager.js","webpack:///./lib/racoon.js","webpack:///./lib/bakku-runner.js","webpack:///./lib/platform.js","webpack:///./lib/game.js","webpack:///./lib/background.js","webpack:///./lib/water.js","webpack:///./lib/sound.js","webpack:///./lib/level_handler.js","webpack:///./lib/bear.js","webpack:///./lib/wolf.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;AC7DA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;AC3DA,OAAO,QAAQ;;AAEf;AACA,GAAG,aAAa;AAChB,GAAG,eAAe;AAClB,GAAG,eAAe;;AAElB,GAAG,cAAc;AACjB,GAAG,gBAAgB;AACnB,GAAG,gBAAgB;;AAEnB,GAAG,eAAe;AAClB,GAAG,iBAAiB;AACpB,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACpEA;AACA,OAAO,sBAAsB;;AAE7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,wBAAwB,EAAE;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC1GA,OAAO,SAAS;AAChB;AACA,GAAG,aAAa;AAChB,GAAG,eAAe;AAClB,GAAG,eAAe;AAClB,GAAG,eAAe;AAClB,GAAG;AACH;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACxCA;AACA;AACA,OAAO,sBAAsB;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;;;;AAIA,CAAC;;;;;;;AC7BD,OAAO,SAAS;;AAEhB;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACpBA;AACA;AACA,OAAO,sBAAsB;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;;;AAGA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,mBAAmB,2CAA2C;AAC9D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,2CAA2C;AAC9D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACtTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACZA;AACA,eAAe,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AChBA,OAAO,SAAS;AAChB;AACA,GAAG,aAAa;AAChB,GAAG,kBAAkB;AACrB,GAAG,kBAAkB;AACrB,GAAG,mBAAmB;AACtB,GAAG,iBAAiB;AACpB,GAAG,mBAAmB;AACtB,GAAG,kBAAkB;AACrB,GAAG,mBAAmB;AACtB;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;AC3CA,OAAO,SAAS;AAChB;AACA,GAAG,aAAa;AAChB,GAAG,iBAAiB;AACpB,GAAG,kBAAkB;AACrB,GAAG,kBAAkB;AACrB,GAAG,kBAAkB;AACrB,GAAG,kBAAkB;AACrB,GAAG,eAAe;AAClB,GAAG,kBAAkB;AACrB,GAAG,kBAAkB;AACrB,GAAG,kBAAkB;AACrB,GAAG;AACH;AACA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap accbcbbd9ebccbafe00e","export const random = (min, max) => {\n    return Math.round(min + (Math.random() * (max - min)));\n}\n\nexport const randomColor = (array) => {\n    return array[Math.round(random(0, array.length -1 ))];\n}\n\nexport const inherits = (ChildClass, ParentClass) => {\n    function Surrogate(){};\n    Surrogate.prototype = ParentClass.prototype;\n    ChildClass.prototype = new Surrogate();\n    ChildClass.prototype.constructor = ChildClass;\n}\n\nexport class Vector{\n  constructor(options){\n    this.x = options.x;\n    this.y = options.y;\n    this.width = options.width;\n    this.height = options.height;\n    this.drawingWidth = options.drawingWidth;\n    this.drawingHeight = options.drawingHeight;\n    this.prevX = 0;\n    this.prevY = 0;\n    this.setPos(options.x, options.y);\n  }\n\n  setPos(x, y){\n    this.prevX = this.x;\n    this.prevY = this.y;\n    this.x = x;\n    this.y = y;\n  }\n\n  isCollidedWith(otherObject) {\n    if (this.x < otherObject.x + otherObject.width &&\n     this.x + this.width > otherObject.x &&\n     this.y < otherObject.y + otherObject.height &&\n     this.height + this.y > otherObject.y) {\n      // console.log(`collision detected!!`);\n      return true;\n    }\n    return false;\n  }\n\n  isCollidedWithLeft(obj){\n    if (obj.x < this.x + this.width && obj.y < this.y + this.height) {\n      return true;\n    }\n    return false;\n  }\n\n};\n// Find distance between two points.\nexport const dist = (pos1, pos2) => {\n    return Math.sqrt(\n      Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2)\n    );\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/util.js\n// module id = 0\n// module chunks = 0","const { Vector} = require('./util.js');\n\nconst DOG_SPRITES = [\n  { x: 0, y: 0 },\n  { x: 141, y: 0 },\n  { x: 282, y: 0 },\n\n  { x: 0, y: 73 },\n  { x: 141, y: 73 },\n  { x: 282, y: 73 },\n\n  { x: 0, y: 146 },\n  { x: 141, y: 146 },\n  { x: 282, y: 146 }\n]\n\nclass Player extends Vector{\n  constructor(options){\n    super(options);\n\n    this.velocityX = 0;\n    this.velocityY = 0;\n    this.jumpSize = -13;\n    this.color = '#181818';\n    this.game = options.game\n\n    this.image = new Image();\n    this.image.src = options.src;\n    this.spriteSpeed = 0;\n  }\n\n  updateStatus(){\n    this.velocityY += 1;\n    this.setPos(this.x + this.velocityX, this.y + this.velocityY);\n\n    if (this.y > this.game.height || this.x + this.width < 0) {\n      this.x = 150;\n      this.y = 50;\n      this.velocityX = 0;\n      this.velocityY = 0;\n      this.game.jumpCount = 0;\n      this.game.aceleration = 0;\n      this.game.acelerationTweening = 0;\n      this.game.scoreColor = '#181818';\n      this.game.platformManager.maxDistanceBetween = 350;\n      this.game.platformManager.updateWhenLose();\n    }\n    if ((this.game.keys.UP || this.game.keys.SPACE || this.game.keys.W || this.game.dragging) && this.velocityY < -8) {\n      this.velocityY += -0.75;\n    }\n\n    this.spriteSpeed += 0.2;\n  }\n  \n  draw(ctx) {\n    const spriteIndex = parseInt(this.spriteSpeed) % DOG_SPRITES.length;\n    const srcPlayerWidth = 141, srcPlayerHeight = 73;\n    const sprite = DOG_SPRITES[spriteIndex];\n\n    ctx.drawImage(this.image,\n      sprite.x, sprite.y , srcPlayerWidth, srcPlayerHeight,\n      this.x, this.y + 5, this.drawingWidth, this.drawingHeight);\n    // ctx.fillStyle = this.color;\n    // ctx.fillRect(this.x, this.y, this.width, this.height);\n  }\n\n}\n\nmodule.exports = Player;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/player.js\n// module id = 1\n// module chunks = 0","const Platform = require('./platform');\nconst { random, randomColor } = require('./util');\n\nclass PlatformManager{\n  constructor(options){\n    this.maxDistanceBetween = 300;\n    this.colors = ['#2ca8c2', '#98cb4a', '#f76d3c', '#f15f74', '#5481e6'];\n\n    this.first = new Platform({\n      x: 300,\n      y: options.height -70,\n      width: 800, //400,\n      height: 70,\n      src: options.src,\n      imgWidth: options.imgWidth,\n      imgHeight: options.imgHeight\n    })\n    this.second = new Platform({\n      x: (this.first.x + this.first.width) + random(this.maxDistanceBetween - 150, this.maxDistanceBetween),\n      y: random(this.first.y - 128, options.height - 80),\n      width: 800, //400,\n      height: 70,\n      src: options.src,\n      imgWidth: options.imgWidth,\n      imgHeight: options.imgHeight\n    })\n    this.third = new Platform({\n      x: (this.second.x + this.second.width) + random(this.maxDistanceBetween - 150, this.maxDistanceBetween),\n      y: random(this.second.y - 128, options.height - 80),\n      width: 800, //400,\n      height: 70,\n      src: options.src,\n      imgWidth: options.imgWidth,\n      imgHeight: options.imgHeight\n    })\n    this.first.height = this.first.y + options.height;\n    this.second.height = this.second.y + options.height;\n    this.third.height = this.third.y + options.height;\n    this.first.color = randomColor(this.colors);\n    this.second.color = randomColor(this.colors);\n    this.third.color = randomColor(this.colors);\n\n    this.platforms = [this.first, this.second, this.third];\n\n    this.aceleration = options.aceleration;\n    this.width = options.width;\n    this.height = options.height;\n\n    this.enemy = options.enemy;\n  }\n\n  draw(ctx){\n    this.enemy.draw(ctx);\n    for (let i = 0; i < this.platforms.length; i++) {\n      // console.log(`${i} platform is drawing`)\n      // debugger\n      this.platforms[i].draw(ctx);\n    };\n  }\n\n  updateStatus(){\n    this.first.x -= 3 + this.aceleration;\n    if (this.first.x + this.first.width < 0) {\n      this.first.width = random(450, this.width + 200);\n      this.first.x = (this.third.x + this.third.width) + random(this.maxDistanceBetween - 150, this.maxDistanceBetween);\n      this.first.y = random(this.third.y - 32, this.height - 80);\n      this.first.height = this.first.y + this.height + 10;\n      this.first.color = randomColor(this.colors);\n    }\n\n    this.second.x -= 3 + this.aceleration;\n    if (this.second.x + this.second.width < 0) {\n      this.second.width = random(450, this.width + 200);\n      this.second.x = (this.first.x + this.first.width) + random(this.maxDistanceBetween - 150, this.maxDistanceBetween);\n      this.second.y = random(this.first.y - 32, this.height - 80);\n      this.second.height = this.second.y + this.height + 10;\n      this.second.color = randomColor(this.colors);\n    }\n\n    this.third.x -= 3 + this.aceleration;\n    if (this.third.x + this.third.width < 0) {\n      this.third.width = random(450, this.width + 200);\n      this.third.x = (this.second.x + this.second.width) + random(this.maxDistanceBetween - 150, this.maxDistanceBetween);\n      this.third.y = random(this.second.y - 32, this.height - 80);\n      this.third.height = this.third.y + this.height + 10;\n      this.third.color = randomColor(this.colors);\n    }\n\n    //enemy status\n    this.enemy.updateStatus({\n      x: this.second.x + this.second.width/2,\n      y: this.second.y +10\n    });\n\n  }\n\n  updateWhenLose(){\n    this.first.x = 300;\n    this.first.color = randomColor(this.colors);\n    this.first.y = this.width / random(2, 3);\n    this.second.x = (this.first.x + this.first.width) + random(this.maxDistanceBetween - 150, this.maxDistanceBetween);\n    this.third.x = (this.second.x + this.second.width) + random(this.maxDistanceBetween - 150, this.maxDistanceBetween);\n  }\n\n}\n\nmodule.exports = PlatformManager;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/platform_manager.js\n// module id = 2\n// module chunks = 0","const { Vector } = require('./util');\nconst RACCOON_SPRITES = [\n  { x: 0, y: 0 },\n  { x: 0, y: 114 },\n  { x: 0, y: 228 },\n  { x: 0, y: 342 },\n  { x: 0, y: 456 }\n]\n\nclass Racoon extends Vector{\n  constructor(options={}){\n    super(options);\n\n    this.image = new Image();\n    this.image.src =  \"./assets/images/raccoon_sprite.png\";\n    this.spriteSpeed = 0;\n    this.drawingWidth =  78;\n    this.drawingHeight = 77;\n  }\n\n  updateStatus(options={}){\n    this.x = options.x;\n    this.y = options.y - this.height;\n    this.spriteSpeed += 0.05;\n  }\n\n  draw(ctx) {\n    const spriteIndex = parseInt(this.spriteSpeed) % RACCOON_SPRITES.length;\n    const sprite = RACCOON_SPRITES[spriteIndex];\n    const srcRacoonWidth = 118, srcRacoonHeight = 107;\n\n    ctx.drawImage(\n      this.image,\n      sprite.x, sprite.y , srcRacoonWidth, srcRacoonHeight,\n      this.x, this.y -10 ,\n      this.drawingWidth , this.drawingHeight);\n  }\n\n}\n\nmodule.exports = Racoon;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/racoon.js\n// module id = 3\n// module chunks = 0","const Player = require('./player');\nconst PlatformManager = require('./platform_manager');\nconst { random, randomColor } = require('./util');\nconst Game = require('./game');\nconst Sound = require('./sound');\nconst LevelHandler = require('./level_handler');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  console.log('bakku runner start');\n\n  this.canvas = document.getElementById('container');\n  this.ctx = this.canvas.getContext('2d');\n  this.menu = document.getElementById('menu');\n  const game = new Game(this.ctx);\n  // debugger\n  // game.toggleSound.bind(game);\n  // game.toggleSound();\n  //background music\n  // this.sound = new Sound();\n  // document.getElementById('bg-sound').addEventListener('click', this.sound.toggleSound.bind(this.sound));\n\n  //handle levels\n  this.levelHandler = new LevelHandler({ menu, game });\n  this.levelHandler.easy.addEventListener('click', this.levelHandler.setLevel.bind(this.levelHandler));\n  this.levelHandler.medium.addEventListener('click', this.levelHandler.setLevel.bind(this.levelHandler));\n  this.levelHandler.hard.addEventListener('click', this.levelHandler.setLevel.bind(this.levelHandler));\n\n\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/bakku-runner.js\n// module id = 4\n// module chunks = 0","const { Vector } = require('./util');\n\nclass Platform extends Vector{\n  constructor(options = {}){\n    super(options)\n    this.prevX = 0;\n    this.prevY = 0;\n    this.color = options.color;\n\n    this.image = new Image();\n    this.image.src = options.src;\n    this.imgWidth = options.imgWidth;\n    this.imgHeight = options.imgHeight;\n  }\n\n  draw(ctx){\n    ctx.drawImage(this.image,0, 0, this.imgWidth, this.imgHeight, this.x, this.y, this.width, 90);\n  }\n\n}\nmodule.exports = Platform;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/platform.js\n// module id = 5\n// module chunks = 0","const PlatformManager = require('./platform_manager');\nconst Player = require('./player');\nconst { random, randomColor } = require('./util');\nconst Racoon = require('./racoon');\nconst Background = require('./background');\nconst Water = require('./water');\nconst Bear = require('./bear');\nconst Wolf = require('./wolf');\n\nconst keynames = {\n  8: 'BACKSPACE',\n  9: 'TAB',\n  13: 'ENTER',\n  16: 'SHIFT',\n  27: 'ESCAPE',\n  32: 'SPACE',\n  37: 'LEFT',\n  38: 'UP',\n  39: 'RIGHT',\n  40: 'DOWN'\n};\n\nclass Game {\n  constructor(ctx){\n    this.width = ctx.canvas.width;\n    this.height = ctx.canvas.height;\n    this.ctx = ctx;\n    this.level = null;\n  }\n\n  setup(){\n    this.jumpCount = 0;\n    this.aceleration = 0;\n    this.acelerationTweening = 0;\n    this.collidedPlatform = null;\n    this.scoreColor = '#181818';\n    this.jumpCountRecord = 0;\n    this.keys = [];\n\n    for( var name in keynames){\n      this.keys[keynames[name]] = false;\n    }\n    this.gamePlaying = false;\n\n    //load Objects\n    this.player = new Player({\n      x: 150,\n      y: 30,\n      width: 111,\n      height: 53,\n      drawingWidth: 131,\n      drawingHeight: 63,\n      src: \"./assets/images/dog_sprite.png\",\n      game: this\n    });\n\n    //load enemies\n    const collinsionEnemyPos = {\n      width: 58,  //collision width\n      height: 67 //collision height\n    };\n    if ( this.level === \"EASY\" ){\n      this.enemy = new Racoon(collinsionEnemyPos);\n    }else if ( this.level === \"MEDIUM\"){\n      this.enemy = new Wolf(collinsionEnemyPos);\n    }else{\n      this.enemy = new Bear(collinsionEnemyPos);\n    }\n\n    //load background\n    if (this.level === \"EASY\"){\n      this.background = new Background({\n        src: \"./assets/images/bg_seattle.jpg\",\n        width:9992 ,\n        height:3333\n      });\n      this.platformManager = new PlatformManager({\n        width: this.width,\n        height: this.height,\n        aceleration: this.aceleration,\n        enemy: this.enemy,\n        src: \"./assets/images/platform_seattle.png\",\n        imgWidth: 450,\n        imgHeight: 71\n      });\n    }else if (this.level === \"MEDIUM\"){\n      this.background = new Background({\n        src: \"./assets/images/bg_newyork.jpg\",\n        width: 9458,\n        height: 3333\n      });\n      this.platformManager = new PlatformManager({\n        width: this.width,\n        height: this.height,\n        aceleration: this.aceleration,\n        enemy: this.enemy,\n        src: \"./assets/images/platform_newyork.png\",\n        imgWidth: 246,\n        imgHeight: 71\n      });\n    }else{\n      this.background = new Background({\n        src: \"./assets/images/bg_winter.jpg\",\n        width: 6666,\n        height: 3333\n      });\n      this.platformManager = new PlatformManager({\n        width: this.width,\n        height: this.height,\n        aceleration: this.aceleration,\n        enemy: this.enemy,\n        src: \"./assets/images/platform_winter.png\",\n        imgWidth: 123,\n        imgHeight: 46\n      });\n\n    }\n\n\n    this.water = new Water();\n\n    //event listener\n    document.addEventListener('keydown', this.keydown.bind(this));\n    // document.addEventListener('keydown', this.reset.bind(this));\n    document.addEventListener('keyup', this.keyup.bind(this));\n\n\n    document.getElementById('bg-sound').addEventListener('click', this.toggleSound.bind(this));\n\n    //laod Sounds\n    this.setSounds.bind(this);\n    this.setSounds();\n  }\n\n  start() {\n    this.setup();\n    if (this.gamePlaying) return;\n    this.gamePlaying = true;\n    this.lastTime = 0;\n    this.toggleSound();\n    const fps = 80;\n    this.fpsInterval = 1000 / fps;\n    this.then = Date.now();\n    this.startTime = this.then;\n\n    this.animate();\n  }\n  clear() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n  }\n\n  animate() {\n    if (!this.gamePlaying) {\n      this.end();\n      return;\n    }\n\n    requestAnimationFrame(this.animate.bind(this));\n\n    // calc elapsed time since last loop\n    const now = Date.now();\n    const elapsed = now - this.then;\n\n    if (elapsed > this.fpsInterval) {\n        this.updateStatus(this.dt);\n        this.clear();\n        this.draw(this.ctx);\n        this.then = now - (elapsed % this.fpsInterval);\n    }\n  }\n\n  end(){\n    // console.log('the end');\n    this.ctx.font = \"50px POLYPTY\";\n    this.ctx.fillStyle = \"black\";\n    this.ctx.textAlign = \"center\";\n    this.ctx.fillText(\"Press 'ENTER' to reset\", this.width/2, this.height/2);\n    this.dogCryingSound.play();\n    this.toggleSound();\n  }\n\n  keydown(event) {\n    this.keys[keynames[event.keyCode]] = true;\n\n    if (this.keys.ENTER){\n      this.start();\n    }else if(this.keys.UP){\n      this.jumpSound.play();\n    }\n  }\n\n  keyup(event) {\n    // debugger\n    this.keys[keynames[event.keyCode]] = false;\n    if (this.keys.W){\n      this.jumpSound.pause();\n    }\n  }\n\n  setSounds() {\n    if (!this.jumpSound)\n      this.jumpSound = new Audio('./assets/sounds/jump.mp3');\n    if (!this.bgSound)\n      this.bgSound = new Audio('./assets/sounds/bg.ogg');\n    if (!this.dogCryingSound)\n      this.dogCryingSound = new Audio('./assets/sounds/dog_crying2.mp3');\n  }\n\n  toggleSound(e){\n    let target =  e ? e.currentTarget : document.getElementById('bg-sound');\n\n    if( target.id === 'bg-sound'){\n      this.bgSound.paused ? this.bgSound.play() : this.bgSound.pause();\n\n    }\n    const [originText1, originText2] = target.innerText.split(' ');\n    originText2 === 'On' ? (target.innerText = originText1.concat(' ','Off')) : (target.innerText = originText1.concat(' ','On'));\n  }\n\n  updateStatus(){\n    this.player.updateStatus();\n\n    switch (this.jumpCount) {\n      case 10:\n        this.acelerationTweening = 1;\n        this.platformManager.maxDistanceBetween = 430;\n        this.scoreColor = '#076C00';\n        break;\n      case 25:\n        this.acelerationTweening = 2;\n        this.platformManager.maxDistanceBetween = 530;\n        this.scoreColor = '#0300A9';\n        break;\n      case 40:\n        this.acelerationTweening = 3;\n        this.platformManager.maxDistanceBetween = 580;\n        this.scoreColor = '#9F8F00';\n        break;\n    }\n\n    this.aceleration += (this.acelerationTweening - this.aceleration) * 0.01;\n\n    //check collision with plaforms\n    for (let i = 0; i < this.platformManager.platforms.length; i++) {\n      if(this.player.isCollidedWith(this.platformManager.platforms[i])){\n        this.collidedPlatform = this.platformManager.platforms[i];\n\n        if (this.player.y < this.platformManager.platforms[i].y) {\n          this.player.y = this.platformManager.platforms[i].y;\n          this.player.velocityY = 0;\n        }\n\n        this.player.x = this.player.prevX;\n        this.player.y = this.player.prevY;\n\n\n        if(this.player.isCollidedWithLeft(this.platformManager.platforms[i])) {\n\n          this.player.x = this.collidedPlatform.x - 64;\n          this.player.velocityY = -10 + -(this.aceleration * 4);\n          this.player.velocityX = -20 + -(this.aceleration * 4);\n        } else {\n\n          if (this.dragging || this.keys.SPACE || this.keys.UP || this.keys.W) {\n            this.player.velocityY = this.player.jumpSize;\n            this.jumpCount++;\n            if (this.jumpCount > this.jumpCountRecord) {\n              this.jumpCountRecord = this.jumpCount;\n            }\n          }\n\n        }\n      }\n    };\n\n    for (let i = 0; i < this.platformManager.platforms.length; i++) {\n      this.platformManager.updateStatus();\n    };\n\n    //check collision with enemy\n    if (this.player.isCollidedWith(this.enemy)){\n      this.gamePlaying = false;\n    }\n\n    //check the player fall into the ground\n    const playerPosY = this.player.y + this.player.height;\n    if (playerPosY > this.height){\n      this.gamePlaying = false;\n    }\n  }\n\n  draw(ctx){\n    this.background.draw(ctx);\n    this.water.draw(ctx);\n    this.player.draw(ctx);\n    this.platformManager.draw(ctx);\n\n    //Draw Score\n    ctx.font = '15pt POLYPTY';\n    ctx.fillStyle = '#181818';\n    ctx.fillText('SCORE: ' + this.jumpCountRecord * 30, this.width - 200, this.height - 400);\n\n    //Draw Jump\n    // ctx.fillStyle = this.scoreColor;\n    // ctx.font = (12 + (this.aceleration * 3)) + 'pt Arial';\n    // ctx.fillText('JUMPS: ' + this.jumpCount, this.width - (150 + (this.aceleration * 4)), 50);\n  }\n\n}\n\nmodule.exports = Game;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/game.js\n// module id = 6\n// module chunks = 0","class Background {\n  constructor(options){\n    // load a image image\n    this.image = new Image();\n    this.image.src = options.src;\n    this.speed = 1;\n    this.x=0;\n    this.y=0;\n    this.width = options.width;\n    this.height = options.height;\n  }\n  draw(ctx) {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n    ctx.drawImage(this.image,\n      0, 0, this.width, this.height,\n      this.x, this.y, ctx.canvas.width, ctx.canvas.height );\n\n    ctx.drawImage(this.image,\n      0 , 0, this.width, this.height,\n      this.x + ctx.canvas.width, this.y, ctx.canvas.width, ctx.canvas.height );\n\n    //redraw after two backgrounds pass by\n    if (this.x < ctx.canvas.width * -1){\n      this.x = 0;\n    }\n    this.scrollImage();\n  }\n\n  scrollImage() {\n    this.x -= this.speed;\n  }\n\n}\n\nmodule.exports = Background;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/background.js\n// module id = 7\n// module chunks = 0","class Water{\n  constructor(){\n    this.image = new Image();\n    this.image.src = './assets/images/water_wave1.png';\n    this.x = 0;\n    this.y = 400;\n    this.width = 547;\n    this.height = 70;\n\n  }\n  draw(ctx){\n    ctx.drawImage(this.image, 0, 0, this.width, 80, 0, ctx.canvas.height - this.height, ctx.canvas.width, this.height);\n    this.scrollImage();\n  }\n  scrollImage() {\n    this.x -= this.speed;\n  }\n}\n\nmodule.exports = Water;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/water.js\n// module id = 8\n// module chunks = 0","class Sound {\n  constructor(){\n    this.bgSoundTag = document.getElementById('bg-sound');\n    this.bgSound = new Audio('./assets/sounds/bg.ogg');\n  }\n  toggleSound(e){\n    this.bgSound.paused ? this.bgSound.play() : this.bgSound.pause();\n    const [originText1, originText2] = this.bgSoundTag.innerText.split(' ');\n    originText2 === 'On' ? (this.bgSoundTag.innerText = originText1.concat(' ','Off')) : (this.bgSoundTag.innerText = originText1.concat(' ','On'));\n  }\n}\n\nmodule.exports = Sound;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/sound.js\n// module id = 9\n// module chunks = 0","class LevelHandler{\n  constructor({menu, game}){\n    this.easy = document.getElementById(\"level-easy\");\n    this.medium = document.getElementById(\"level-medium\");\n    this.hard = document.getElementById(\"level-hard\");\n    this.menu = menu;\n    this.game = game;\n  }\n  setLevel(e){\n    this.menu.style.display = \"none\";\n    this.game.level = e.currentTarget.value;\n    this.game.start();\n  }\n\n}\n\nmodule.exports = LevelHandler;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/level_handler.js\n// module id = 10\n// module chunks = 0","const { Vector } = require('./util');\nconst BEAR_SPRITES = [\n  { x: 0, y: 0 },\n  { x: 93.125, y: 0 },\n  { x: 186.25, y: 0 },\n  { x: 279.375, y: 0 },\n  { x: 372.5, y: 0 },\n  { x: 465.625, y: 0 },\n  { x: 558.75, y: 0 },\n  { x: 651.875, y: 0 },\n]\n\nclass Bear extends Vector{\n  constructor(options={}){\n    super(options);\n\n    this.image = new Image();\n    this.image.src = \"./assets/images/platform_bear2.png\";\n    this.spriteSpeed = 0;\n    this.drawingWidth = 113;\n    this.drawingHeight = 126;\n  }\n\n  updateStatus(options={}){\n    this.x = options.x;\n    this.y = options.y - this.height;\n    this.spriteSpeed += 0.05;\n  }\n\n  draw(ctx) {\n    const spriteIndex = parseInt(this.spriteSpeed) % BEAR_SPRITES.length;\n    const sprite = BEAR_SPRITES[spriteIndex];\n    const srcBearWidth = 93.125, srcBearHeight = 106;\n\n    ctx.drawImage(\n      this.image,\n      sprite.x, sprite.y , srcBearWidth, srcBearHeight,\n      this.x, this.y - 30,\n      this.drawingWidth , this.drawingHeight);\n  }\n\n}\n\nmodule.exports = Bear;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/bear.js\n// module id = 11\n// module chunks = 0","const { Vector } = require('./util');\nconst WOLF_SPRITES = [\n  { x: 0, y: 0 },\n  { x: 66.18, y: 0 },\n  { x: 132.26, y: 0 },\n  { x: 198.54, y: 0 },\n  { x: 264.72, y: 0 },\n  { x: 330.90, y: 0 },\n  { x: 397, y: 0 },\n  { x: 463.56, y: 0 },\n  { x: 529.74, y: 0 },\n  { x: 595.92, y: 0 },\n  { x: 662.10, y: 0 }\n]\nclass Cat extends Vector{\n  constructor(options={}){\n    super(options);\n\n    this.image = new Image();\n    this.image.src = \"./assets/images/wolf.png\";\n    this.spriteSpeed = 0;\n    this.drawingWidth = 132;\n    this.drawingHeight = 122;\n  }\n\n  updateStatus(options={}){\n    this.x = options.x;\n    this.y = options.y - this.height;\n    this.spriteSpeed += 0.01;\n  }\n\n  draw(ctx) {\n    const spriteIndex = parseInt(this.spriteSpeed) % WOLF_SPRITES.length;\n    const sprite = WOLF_SPRITES[spriteIndex];\n    const srcCatWidth = 66.18, srcCatHeight = 56;\n\n    ctx.drawImage(\n      this.image,\n      sprite.x, sprite.y , srcCatWidth, srcCatHeight,\n      this.x, this.y - 50,\n      this.drawingWidth , this.drawingHeight);\n  }\n\n}\n\nmodule.exports = Cat;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/wolf.js\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}